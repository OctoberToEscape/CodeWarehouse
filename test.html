<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <div id="app"></div>
    </body>
</html>
<script>
    // //创建父类
    // class Build {
    //     //初始化
    //     init() {
    //         Object.keys(this).forEach((key) => {
    //             //统一生成方法名
    //             const addName = `add${key
    //                 .substring(0, 1)
    //                 .toUpperCase()}${key.substring(1)}`;
    //             //统一执行方法
    //             this[addName] = (val) => {
    //                 this[key] = val;
    //                 return this;
    //             };
    //         });
    //     }
    //     //建造
    //     build() {
    //         const keyNotAdd = Object.keys(this).filter(
    //             (key) => typeof this[key] !== "function"
    //         );

    //         return keyNotAdd.reduce((val, key) => {
    //             return {
    //                 ...val,
    //                 [key]: this[key],
    //             };
    //         }, {});
    //     }
    // }

    // //子类1:创建电脑
    // class BuildComputer extends Build {
    //     constructor() {
    //         super();
    //         this.monitor = "";
    //         this.cpu = "";
    //         this.ram = "";
    //         this.opticalDrive = "";
    //         this.keyboard = "";
    //         this.mouse = "";
    //         super.init();
    //     }
    // }

    // //子类2:创建汽车
    // class BuildCar extends Build {
    //     constructor() {
    //         super();
    //         this.engine = "";
    //         this.chassis = "";
    //         this.body = "";
    //         super.init();
    //     }
    // }
    // // 电脑
    // const computer = new BuildComputer()
    //     .addMonitor("5k高清显示屏")
    //     .addCpu("3.00GHz")
    //     .addRam("16G")
    //     .addOpticalDrive("外置光驱")
    //     .addKeyboard("机械键盘")
    //     .addMouse("雷蛇鼠标")
    //     .build();
    // console.log(computer);

    // //汽车
    // const car = new BuildCar()
    //     .addEngine("v12发动机")
    //     .addChassis("复合材料底盘")
    //     .addBody("碳纤维车身")
    //     .build();
    // console.log(car);

    // class Cat {
    //     constructor(person) {
    //         console.log(`${person}买了一只猫咪`);
    //     }
    // }

    // class Dog {
    //     constructor(person) {
    //         console.log(`${person}买了一只狗`);
    //     }
    // }

    // class Pig {
    //     constructor(person) {
    //         console.log(`${person}买了一只猪`);
    //     }
    // }

    // class Animal {
    //     constructor(animal, person) {
    //         switch (animal) {
    //             case "cat":
    //                 return new Cat(person);
    //                 break;
    //             case "dog":
    //                 return new Dog(person);
    //                 break;
    //             case "pig":
    //                 return new Pig(person);
    //                 break;
    //             default:
    //                 throw new Error(`尊敬的${person},很抱歉,本店没有${animal}`);
    //         }
    //     }
    // }

    // new Animal("cat", "Tom");
    // new Animal("pig", "Jack");
    // new Animal("dog", "Lisa");
    // new Animal("monkey", "Heqi");

    const Animal = (() => {
        const animal = {
            cat(person) {
                console.log(`${person}买了一只猫咪`);
            },
            dog(person) {
                console.log(`${person}买了一只狗子`);
            },
            pig(person) {
                console.log(`${person}买了一只猪猪`);
            },
            //现在宠物店新进了一只宠物
            monkey(person) {
                console.log(`${person}买了一只猴子`);
            },
        };

        return class {
            constructor(type, person) {
                try {
                    return animal[type](person);
                } catch {
                    throw new Error(`尊敬的${person},很抱歉,本店没有${type}`);
                }
            }
        };
    })();

    //再次购买宠物
    new Animal("cat", "Tom");
    new Animal("pig", "Jack");
    new Animal("dog", "Lisa");
    new Animal("monkey", "Heqi");
</script>
