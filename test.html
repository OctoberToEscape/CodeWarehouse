<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <div id="app"></div>
    </body>
</html>
<script>
    // //创建父类
    // class Build {
    //     //初始化
    //     init() {
    //         Object.keys(this).forEach((key) => {
    //             //统一生成方法名
    //             const addName = `add${key
    //                 .substring(0, 1)
    //                 .toUpperCase()}${key.substring(1)}`;
    //             //统一执行方法
    //             this[addName] = (val) => {
    //                 this[key] = val;
    //                 return this;
    //             };
    //         });
    //     }
    //     //建造
    //     build() {
    //         const keyNotAdd = Object.keys(this).filter(
    //             (key) => typeof this[key] !== "function"
    //         );

    //         return keyNotAdd.reduce((val, key) => {
    //             return {
    //                 ...val,
    //                 [key]: this[key],
    //             };
    //         }, {});
    //     }
    // }

    // //子类1:创建电脑
    // class BuildComputer extends Build {
    //     constructor() {
    //         super();
    //         this.monitor = "";
    //         this.cpu = "";
    //         this.ram = "";
    //         this.opticalDrive = "";
    //         this.keyboard = "";
    //         this.mouse = "";
    //         super.init();
    //     }
    // }

    // //子类2:创建汽车
    // class BuildCar extends Build {
    //     constructor() {
    //         super();
    //         this.engine = "";
    //         this.chassis = "";
    //         this.body = "";
    //         super.init();
    //     }
    // }
    // // 电脑
    // const computer = new BuildComputer()
    //     .addMonitor("5k高清显示屏")
    //     .addCpu("3.00GHz")
    //     .addRam("16G")
    //     .addOpticalDrive("外置光驱")
    //     .addKeyboard("机械键盘")
    //     .addMouse("雷蛇鼠标")
    //     .build();
    // console.log(computer);

    // //汽车
    // const car = new BuildCar()
    //     .addEngine("v12发动机")
    //     .addChassis("复合材料底盘")
    //     .addBody("碳纤维车身")
    //     .build();
    // console.log(car);

    // class Cat {
    //     constructor(person) {
    //         console.log(`${person}买了一只猫咪`);
    //     }
    // }

    // class Dog {
    //     constructor(person) {
    //         console.log(`${person}买了一只狗`);
    //     }
    // }

    // class Pig {
    //     constructor(person) {
    //         console.log(`${person}买了一只猪`);
    //     }
    // }

    // class Animal {
    //     constructor(animal, person) {
    //         switch (animal) {
    //             case "cat":
    //                 return new Cat(person);
    //                 break;
    //             case "dog":
    //                 return new Dog(person);
    //                 break;
    //             case "pig":
    //                 return new Pig(person);
    //                 break;
    //             default:
    //                 throw new Error(`尊敬的${person},很抱歉,本店没有${animal}`);
    //         }
    //     }
    // }

    // new Animal("cat", "Tom");
    // new Animal("pig", "Jack");
    // new Animal("dog", "Lisa");
    // new Animal("monkey", "Heqi");

    // const Animal = (() => {
    //     const animal = {
    //         cat(person) {
    //             console.log(`${person}买了一只猫咪`);
    //         },
    //         dog(person) {
    //             console.log(`${person}买了一只狗子`);
    //         },
    //         pig(person) {
    //             console.log(`${person}买了一只猪猪`);
    //         },
    //         //现在宠物店新进了一只宠物
    //         monkey(person) {
    //             console.log(`${person}买了一只猴子`);
    //         },
    //     };

    //     return class {
    //         constructor(type, person) {
    //             try {
    //                 return animal[type](person);
    //             } catch {
    //                 throw new Error(`尊敬的${person},很抱歉,本店没有${type}`);
    //             }
    //         }
    //     };
    // })();

    // //再次购买宠物
    // new Animal("cat", "Tom");
    // new Animal("pig", "Jack");
    // new Animal("dog", "Lisa");
    // new Animal("monkey", "Heqi");

    // 总店
    // class HeadOffice {
    //     sellAnimal(name, person) {
    //         console.log(`店铺出售了一只${name}给${person}`);
    //     }
    //     buyAnimal(name, person) {
    //         console.log(`${person}卖给店铺一只${name}`);
    //     }
    //     methods(type, name, person) {
    //         switch (type) {
    //             case "sell":
    //                 this.sellAnimal(name, person);
    //                 break;
    //             case "buy":
    //                 this.buyAnimal(name, person);
    //         }
    //     }
    // }
    // //陆地宠物分店
    // class LandAnimal extends HeadOffice {
    //     constructor() {
    //         super();
    //     }
    //     cat(type, person) {
    //         this.methods(type, "猫咪", person);
    //     }
    //     dog(type, person) {
    //         this.methods(type, "狗狗", person);
    //     }
    //     pig(type, person) {
    //         this.methods(type, "猪猪", person);
    //     }
    // }

    // //水类宠物分店
    // class FishAnimal extends HeadOffice {
    //     constructor() {
    //         super();
    //     }
    //     shark(type, person) {
    //         this.methods(type, "鲨鱼", person);
    //     }
    //     whale(type, person) {
    //         this.methods(type, "鲸鱼", person);
    //     }
    // }

    // //店铺选择
    // const pet = (shop) => {
    //     switch (shop) {
    //         case "land":
    //             return new LandAnimal();
    //             break;
    //         case "fish":
    //             return new FishAnimal();
    //             break;
    //         default:
    //             throw new Error(`非常抱歉，暂时没有${shop}店铺`);
    //     }
    // };

    // //去陆地宠物店
    // const landShop = pet("land");
    // landShop.cat("sell", "tom");
    // landShop.dog("buy", "jack");

    // //去水族馆
    // const aquarium = pet("fish");
    // aquarium.shark("sell", "lisa");
    // aquarium.whale("buy", "Nick");

    // //去一个不存在的店铺1
    // const zoo = pet("zoo");

    //单例模式
    class Singleton {
        static instance = null;
        constructor(name) {
            this.name = name;
        }
        getName() {
            console.log(this.name);
        }
        static getInstance(name) {
            if (!Singleton.instance) {
                Singleton.instance = new Singleton(name);
            }
            return Singleton.instance;
        }
    }

    const point1 = Singleton.getInstance("java");
    const point2 = Singleton.getInstance("php");
    point1.getName();
    point2.getName();
    console.log(point1 === point2);

    // class Singleton {
    //     // 静态属性
    //     static instance = null;
    //     constructor(name) {
    //         if (Singleton.instance) return Singleton.instance;
    //         this.name = name;
    //         return (Singleton.instance = this);
    //     }
    //     getName() {
    //         console.log(this.name);
    //     }
    // }
    // const point1 = new Singleton("javascript");
    // const point2 = new Singleton("php");
    // point1.getName();
    // point2.getName();
    // console.log(point1 === point2);

    // class Singleton {
    //     constructor(name) {
    //         this.name = name;
    //     }
    //     getName() {
    //         console.log(this.name);
    //     }
    // }

    // let proxySingleton = (function(){
    //     var instance = null;
    //     return function (name) {
    //         if (!instance) {
    //             instance = new Singleton(name);
    //         }
    //         return instance;
    //     };
    // })();
    // const point1 = new proxySingleton("java");
    // const point2 = new proxySingleton("javascript");
    // point1.getName();
    // point2.getName();
    // console.log(point1 === point2);
</script>
